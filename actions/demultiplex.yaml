---
name: demultiplex 
description: Run demultiplexing
enabled: true
runner_type: mistral-v2
entry_point: workflows/demultiplex.yaml
pack: arteria-packs
parameters:
  
  context:
    default: {}
    immutable: true
    type: object
  
  workflow:
    default: arteria-packs.demultiplex 
    immutable: true
    type: string
  
  host:
    default: null
    required: true    
    type: string
    description: "Host where the runfolder is located."

  username:
    default: vagrant
    required: true
    type: string
    description: "Username to use in remote tasks."

  #TODO We should figure out how to do this using keys instead.
  password:
    default: vagrant
    required: true
    type: string
    description: "Password to use in remote tasks."
  
  runfolder_name:
    default: null
    type: string
    required: true
    description: "Name of runfolder to demultiplex."

  bcl2fastq_version:
    default: ""
    type: string
    description: "bcl2fastq version to use"

  samplesheet_location:
    default: "/srv/samplesheet/processning/"
    type: string
    required: true
    description: "Location where to look for samplesheets."

  barcode_mismatches:
    default: ""
    type: string
    description: "Number of missmatches to allow. Accepts 0, 1 or 2"

  tiles:
    default: ""
    type: string
    description: "Regular expression for tiles to include (see bcl2fastq manual for detailed description)"

  use_base_mask:
    default: ""
    type: string
    description: "Base mask to use (see bcl2fastq manual for detailed description)."

  bcl2fastq_additional_arguments:
    default: ""
    type: string
    description: "Any additional arguments to bcl2fastq can be fed here. Note that quoutes (\") are needed around arguments for the to parse properly. E.g. \"--my-first-arg 1 --my-second-arg 2\" "
 
    

