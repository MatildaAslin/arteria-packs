version: "2.0" # mistral version

arteria-packs.demultiplex:

    #name: arteria-packs.demultiplex
    #description: Workflow to run demultiplexing.

    type: direct
    input:
        - host
        - username
        - password
        - runfolder
        - barcode_mismatches
        - tiles
        - use_bases_mask
        - bcl2fastq_additional_arguments

    tasks:

        #download_samplesheet:
            #TODO

        #download_qc_config:
            #TODO

        #get_tiles_to_include:
            #TODO

        run_bcl2fastq:
            action: arteria-packs.bcl2fastq
            input:
                hosts: <% $.host %>
                input: <% $.runfolder %>
                output: "/data/scratch/<% $.runfolder %>"
                barcode_mismatches: <% $.barcode_mismatches %>
                tiles: <% $.tiles %>
                use_bases_mask: <% $.use_bases_mask %>
                additional_arguments: <% $.bcl2fastq_additional_arguments %>
                username: <% $.username %>
                password: <% $.password %>
