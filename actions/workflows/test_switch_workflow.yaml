version: "2.0" # mistral version
name: arteria-packs.test_switch_workflow
description: Testing if it's possible to switch depending on input

workflows:
    main:
        type: direct
        input:
          - skip_qc
        tasks:
            switch:
              action: core.local
              input:
                cmd: ech hello world
              on-success:
                 - whoami
              on-error:
                 - hostname: <% $.skip_qc %>
                 - echo_failure: <% not $.skip_qc %>

            whoami:
                action: core.local
                input:
                    cmd: "whoami"

            hostname:
                action: core.local
                input:
                    cmd: "hostname"

            echo_failure:
              action: core.local
              input:
                  cmd: echo failure